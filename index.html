<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IPTV Player | Converge & Cignal</title>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background:#1a1a1a; color:#fff; height:100vh;
            display:flex; flex-direction:column;
        }
        header {
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            padding:15px; text-align:center;
            box-shadow:0 2px 10px rgba(0,0,0,0.3);
        }
        .logo { font-size:24px;font-weight:bold;margin-bottom:5px; }
        .tagline { font-size:14px;opacity:.9; }

        .player-container {
            flex:1; position:relative; background:#000;
            margin:10px; border-radius:10px; overflow:hidden;
            min-height:200px;
        }
        #video-container { width:100%; height:100%; }
        #video { width:100%; height:100%; object-fit:contain; }

        .controls {
            padding:15px; background:#2d2d2d; display:flex; gap:10px;
            flex-wrap:wrap; justify-content:center;
        }
        .playlist-btn {
            padding:12px 20px; border:none; border-radius:25px;
            font-weight:bold; cursor:pointer;
            transition:all .3s ease; min-width:140px; font-size:14px;
        }
        #converge-btn {
            background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%); color:white;
        }
        #cignal-btn {
            background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%); color:white;
        }
        .playlist-btn:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,0,0,0.3); }

        .playlist-btn.active { box-shadow:0 0 0 3px rgba(255,255,255,0.3); }

        .channel-list-container {
            background:#2d2d2d; margin:10px; border-radius:10px;
            overflow:hidden; flex:1; min-height:200px;
            display:flex; flex-direction:column;
        }
        .channel-list-header {
            padding:10px 15px; background:#3a3a3a;
            font-weight:bold; display:flex; justify-content:space-between; align-items:center;
        }
        .channel-count { background:#667eea; padding:2px 8px; border-radius:10px; font-size:12px; }

        .channel-list { overflow-y:auto; flex:1; }

        .channel-item {
            padding:12px 15px; background:#3a3a3a; border-bottom:1px solid #4a4a4a;
            cursor:pointer; transition:background .3s; display:flex; align-items:center;
        }
        .channel-item:hover { background:#4a4a4a; }
        .channel-item.active { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); }

        .channel-logo {
            width:30px; height:30px; background:#667eea; border-radius:50%;
            margin-right:10px; display:flex; align-items:center; justify-content:center;
            font-weight:bold; font-size:12px;
        }

        .channel-info { flex:1; }
        .channel-name { font-weight:bold; margin-bottom:2px; display:flex; gap:5px; }
        .channel-group { font-size:11px; opacity:.7; }

        .status {
            text-align:center; padding:10px; font-size:14px;
            background:#2d2d2d; margin:0 10px 10px 10px; border-radius:5px;
        }

        .loading {
            display:none; position:absolute; top:50%; left:50%;
            transform:translate(-50%,-50%); color:white; text-align:center;
            z-index:10; background:rgba(0,0,0,.8); padding:20px; border-radius:10px;
        }
        .loader {
            border:4px solid #f3f3f3; border-top:4px solid #667eea;
            border-radius:50%; width:40px; height:40px;
            animation:spin 1s linear infinite; margin:0 auto 10px;
        }
        @keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

        .error-message {
            display:none; background:#f5576c; color:white;
            padding:10px; margin:10px; border-radius:5px; text-align:center;
        }

        @media (max-width:768px) {
            .controls { padding:10px; }
            .playlist-btn { flex:1; padding:10px; font-size:13px; }
            .channel-list-container { margin:5px 10px; }
        }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.4/shaka-player.ui.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.4/controls.min.css">
</head>

<body>

<header>
    <div class="logo">IPTV Player</div>
    <div class="tagline">Converge & Cignal Channels</div>
</header>

<div class="error-message" id="error-message"></div>

<div class="player-container">
    <div id="video-container">
        <video id="video" autoplay playsinline controls></video>
    </div>
    <div class="loading" id="loading">
        <div class="loader"></div>
        <div id="loading-text">Loading stream...</div>
    </div>
</div>

<div class="status" id="status">Select a playlist to start streaming</div>

<div class="controls">
    <button class="playlist-btn" id="converge-btn">Converge Playlist</button>
    <button class="playlist-btn" id="cignal-btn">Cignal Playlist</button>
</div>

<div class="channel-list-container">
    <div class="channel-list-header">
        <span>Channels</span>
        <span class="channel-count" id="channel-count">0 channels</span>
    </div>
    <div class="channel-list" id="channel-list">
        <div class="channel-item" style="text-align:center; opacity:.7; justify-content:center;">
            Select a playlist to view channels
        </div>
    </div>
</div>


<script>
/*  
   WALA AKONG BINAGO SA SCRIPT â€” 
   KULANG LANG YUNG PINAKAHULI SA NA-POST MO,
   KAYA IDINAGDAG KO ANG MISSING ENDING.
*/

document.getElementById("converge-btn").onclick = () => {
    loadPlaylist("converge");
    setActive("converge-btn");
};

document.getElementById("cignal-btn").onclick = () => {
    loadPlaylist("cignal");
    setActive("cignal-btn");
};

function setActive(id) {
    document.querySelectorAll(".playlist-btn").forEach(b => b.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function updateStatus(msg) {
    document.getElementById("status").innerText = msg;
}

function showError(msg) {
    const e = document.getElementById("error-message");
    e.style.display = "block";
    e.innerText = msg;
}

function hideError() {
    document.getElementById("error-message").style.display = "none";
}

function showLoading(state, text="") {
    const load = document.getElementById("loading");
    document.getElementById("loading-text").innerText = text;
    load.style.display = state ? "block" : "none";
}

initPlayer();
</script>

</body>
</html>
